<div class="container mt-3">
  <!-- Overlay de éxito/error en el centro -->
  <div v-if="mensaje" 
      class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center"
      style="background: rgba(0,0,0,0.5); z-index: 2000;">
    <div class="bg-white rounded-4 shadow-lg p-5 text-center" style="max-width: 400px;">
      <div v-if="mensajeTipo === 'success'" class="text-success">
        <i class="bi bi-check-circle-fill display-1"></i>
      </div>
      <div v-if="mensajeTipo === 'error'" class="text-danger">
        <i class="bi bi-x-circle-fill display-1"></i>
      </div>
      <p class="mt-3 fs-4 fw-bold">{{ mensaje }}</p>
    </div>
  </div>

  <!-- Encabezado -->
  <div class="bg-light border rounded-4 shadow-sm py-3 px-4 mb-4">
    <h2 class="text-center mb-0 fw-bold mt-5">
      <i class="bi bi-people-fill me-2 text-primary"></i> Lista de Géneros
    </h2>
  </div>

  <!-- Buscar y Crear -->
  <div class="row mb-3">
    <div class="col-12 col-md-4 mb-2">
      <input type="text" class="form-control" placeholder="Buscar" v-model="busqueda">
    </div>
    <div class="col-12 col-md-8 d-flex justify-content-end align-items-center">
      <button class="btn btn-success" @click="resetForm(); mostrarModal = true;">
        Crear género
      </button>
    </div>
  </div>

  <!-- Lista de Géneros -->
  <div class="row g-4 mt-2">
    <div class="col-12 col-sm-6 col-md-4 col-lg-3" v-for="genero in generosFiltrados" :key="genero.genero_id">
      <div class="card h-100 shadow-lg rounded-4 bg-light border-0 card-hover">
        <div class="card-body d-flex flex-column justify-content-center align-items-center p-4">
          <i class="bi bi-person display-3 text-primary mb-3"></i>
          <h4 class="card-title text-center fw-bold mb-2">{{ genero.nombre }}</h4>
          <hr class="w-50 my-2">
          <p class="card-text mb-1"><span class="fw-semibold text-secondary">Id:</span> {{ genero.genero_id }}</p>
          <div class="mt-3 d-flex gap-2">
            <button class="btn btn-primary btn-sm" @click="editarGenero(genero); mostrarModal = true;">
              <i class="bi bi-pencil"></i> Editar
            </button>
            <button class="btn btn-danger btn-sm" @click="eliminarGenero(genero.genero_id)">
              <i class="bi bi-trash"></i> Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Crear/Editar -->
  <div class="modal fade show" tabindex="-1" style="display: block; background: rgba(0,0,0,0.5);" v-if="mostrarModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-people-fill me-2"></i>
            {{ generoForm.genero_id ? 'Editar Género' : 'Crear Género' }}
          </h5>
          <button type="button" class="btn-close" @click="mostrarModal = false; resetForm();"></button>
        </div>
        <form @submit.prevent="guardarGenero">
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label">Nombre</label>
              <input v-model="generoForm.nombre" type="text" class="form-control" required>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">
              {{ generoForm.genero_id ? 'Actualizar' : 'Crear' }}
            </button>
            <button type="button" class="btn btn-secondary" @click="mostrarModal = false; resetForm();">Cancelar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
